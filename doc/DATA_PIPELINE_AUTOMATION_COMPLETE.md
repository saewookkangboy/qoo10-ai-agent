# λ°μ΄ν„° νμ΄ν”„λΌμΈ μλ™ν™” κ°μ„  μ™„λ£ λ³΄κ³ μ„

**μ™„λ£ μΌμ‹**: 2024λ…„ (ν„μ¬)
**κ°μ„  λ²”μ„**: λ‹¨κΈ°-μ¤‘κΈ°-μ¥κΈ° λ¨λ“  κ°μ„  μ‚¬ν•­ μλ™ν™”

---

## π“‹ κ°μ„  μ‚¬ν•­ μ”μ•½

### β… λ‹¨κΈ° κ°μ„  (μ™„λ£)

#### 1. Chunk ν™μ© λ΅μ§ μ¶”κ°€
**νμΌ**: `api/services/crawler.py`

**κµ¬ν„ λ‚΄μ©**:
- `_extract_with_learning` ν•¨μμ— μ°μ„  ν¬λ΅¤λ§ Chunk ν™μ© λ΅μ§ μ¶”κ°€
- μ°μ„  ν•„λ“μΈ κ²½μ° Chunk μ •λ³΄μ μ„ νƒμλ¥Ό μµμ°μ„ μΌλ΅ μ‹λ„
- Chunk μ •λ³΄μ—μ„ selector_patternκ³Ό related_classes ν™μ©

**μ£Όμ” λ³€κ²½μ‚¬ν•­**:
```python
# μ°μ„  ν¬λ΅¤λ§ ν•„λ“μΈ κ²½μ° Chunk μ •λ³΄μ μ„ νƒμλ¥Ό μµμ°μ„ μΌλ΅ μ‹λ„
if self._priority_fields and field_name in self._priority_fields:
    if field_name in self._priority_chunks:
        chunks = self._priority_chunks[field_name]
        # Chunk μ •λ³΄μ—μ„ μ„ νƒμ ν¨ν„΄ μ¶”μ¶ν•μ—¬ μ°μ„  μ‹λ„
        for chunk in chunks:
            selector_pattern = chunk.get("selector_pattern")
            if selector_pattern:
                result = extract_func(soup, selector_pattern)
                # μ„±κ³µ μ‹ μ¦‰μ‹ λ°ν™
```

**ν¨κ³Ό**:
- μ¤λ¥ μ‹ κ³ λ ν•„λ“μ— λ€ν•΄ λ” μ •ν™•ν• ν¬λ΅¤λ§ μν–‰
- Chunk μ •λ³΄λ¥Ό ν™μ©ν• κ°•ν™”λ ν¬λ΅¤λ§μΌλ΅ λ°μ΄ν„° ν’μ§ ν–¥μƒ

---

### β… μ¤‘κΈ° κ°μ„  (μ™„λ£)

#### 2. λ³΄μ • λ΅μ§ μ •λ¦¬
**νμΌ**: `api/services/data_validator.py`, `api/main.py`

**κµ¬ν„ λ‚΄μ©**:
- `validate_crawler_vs_report`: κ²€μ¦ λ° λ³΄μ • μν–‰ (κΈ°μ΅΄ μ μ§€)
- `sync_analysis_result_with_crawler_data`: λ‚΄λ¶€μ μΌλ΅ `validate_crawler_vs_report` νΈμ¶ν•λ„λ΅ λ³€κ²½
- `main.py`μ—μ„ μ¤‘λ³µ νΈμ¶ μ κ±°

**μ£Όμ” λ³€κ²½μ‚¬ν•­**:
```python
# sync_analysis_result_with_crawler_dataλ” λ‚΄λ¶€μ μΌλ΅ validate_crawler_vs_reportλ¥Ό νΈμ¶
def sync_analysis_result_with_crawler_data(...):
    validation_result = self.validate_crawler_vs_report(...)
    # μ΄λ―Έ λ³΄μ •μ΄ μν–‰λμ—μΌλ―€λ΅ μ¶”κ°€ μ‘μ—… μ—†μ
    return analysis_result
```

**ν¨κ³Ό**:
- μ¤‘λ³µ λ΅μ§ μ κ±°λ΅ μ½”λ“ κ°„κ²°μ„± ν–¥μƒ
- μ—­ν•  λ…ν™•ν™”λ΅ μ μ§€λ³΄μμ„± κ°μ„ 

#### 3. λ¦¬ν¬νΈμ— κ²€μ¦ κ²°κ³Ό μ„Ήμ… μ¶”κ°€
**νμΌ**: `api/services/report_generator.py`, `api/main.py`

**κµ¬ν„ λ‚΄μ©**:
- `generate_markdown_report`μ— `validation_result` νλΌλ―Έν„° μ¶”κ°€
- λ¦¬ν¬νΈμ— "λ°μ΄ν„° κ²€μ¦ κ²°κ³Ό" μ„Ήμ… μ¶”κ°€
- κ²€μ¦ μ μ, λ¶μΌμΉ ν•­λ©, λ„λ½ ν•­λ©, λ³΄μ •λ ν•„λ“ ν‘μ‹

**μ£Όμ” λ³€κ²½μ‚¬ν•­**:
```python
# λ¦¬ν¬νΈμ— κ²€μ¦ κ²°κ³Ό μ„Ήμ… μ¶”κ°€
if validation_result:
    lines.append("## π” λ°μ΄ν„° κ²€μ¦ κ²°κ³Ό")
    # κ²€μ¦ μ μ, μƒνƒ, λ³΄μ •λ ν•„λ“, λ¶μΌμΉ ν•­λ©, λ„λ½ ν•­λ© ν‘μ‹
```

**ν¨κ³Ό**:
- μ‚¬μ©μκ°€ λ°μ΄ν„° ν’μ§μ„ ν•λμ— ν™•μΈ κ°€λ¥
- λ³΄μ • μ΄λ ¥ μ¶”μ μΌλ΅ ν¬λ…μ„± ν–¥μƒ

---

### β… μ¥κΈ° κ°μ„  (μ™„λ£)

#### 4. μ„±λ¥ μµμ ν™” λ° μ—λ¬ μ²λ¦¬ κ°μ„ 
**νμΌ**: `api/main.py`

**κµ¬ν„ λ‚΄μ©**:
- ν¬λ΅¤λ§ λ‹¨κ³„ μ—λ¬ μ²λ¦¬ κ°μ„  (μƒμ„Έν• μ—λ¬ μ •λ³΄ κΈ°λ΅)
- κ²€μ¦ λ‹¨κ³„ μ—λ¬ μ²λ¦¬ κ°μ„  (μ—λ¬ νƒ€μ… λ° μƒμ„Έ μ •λ³΄ κΈ°λ΅)
- νμ΄ν”„λΌμΈ λ¨λ‹ν„°λ§μ— λ©”νƒ€λ°μ΄ν„° μ¶”κ°€ (error_type, error_details)

**μ£Όμ” λ³€κ²½μ‚¬ν•­**:
```python
# μƒμ„Έν• μ—λ¬ μ •λ³΄ κΈ°λ΅
error_type = type(e).__name__
error_msg = f"HTTP μ¤λ¥ λ°μƒ: {error_type}"
if status_code:
    error_msg += f" (μƒνƒ μ½”λ“: {status_code})"
pipeline_monitor.record_stage(
    ...,
    metadata={
        "error_type": error_type,
        "status_code": status_code,
        "error_details": str(e)[:500]
    }
)
```

**ν¨κ³Ό**:
- μƒμ„Έν• μ—λ¬ μ •λ³΄λ΅ λ””λ²„κΉ… μ©μ΄μ„± ν–¥μƒ
- νμ΄ν”„λΌμΈ λ¨λ‹ν„°λ§ κ°•ν™”λ΅ μ„±λ¥ λ¶„μ„ κ°μ„ 

---

## π”„ λ°μ΄ν„° νλ¦„ κ°μ„ 

### κ°μ„  μ „
```
ν¬λ΅¤λ§ β†’ λ¶„μ„ β†’ κ²€μ¦ β†’ λ¦¬ν¬νΈ μƒμ„±
(Chunk λ―Έν™μ©) (μ¤‘λ³µ λ³΄μ •) (κ²€μ¦ κ²°κ³Ό λ―Έν‘μ‹)
```

### κ°μ„  ν›„
```
ν¬λ΅¤λ§ (Chunk ν™μ©) β†’ λ¶„μ„ β†’ κ²€μ¦ (μλ™ λ³΄μ •) β†’ λ¦¬ν¬νΈ μƒμ„± (κ²€μ¦ κ²°κ³Ό ν‘μ‹)
     β†“                    β†“            β†“                    β†“
μ°μ„  ν•„λ“ κ°•ν™”      μ •ν™•ν• λ¶„μ„    λ³΄μ • μ΄λ ¥ μ¶”μ       λ°μ΄ν„° ν’μ§ ν™•μΈ
```

---

## π“ κ°μ„  ν¨κ³Ό

### 1. λ°μ΄ν„° μ •ν™•λ„ ν–¥μƒ
- **Chunk ν™μ©**: μ¤λ¥ μ‹ κ³ λ ν•„λ“μ— λ€ν•΄ λ” μ •ν™•ν• ν¬λ΅¤λ§
- **μλ™ λ³΄μ •**: ν¬λ΅¤λ¬ λ°μ΄ν„°μ™€ λ¶„μ„ κ²°κ³Ό μλ™ λ™κΈ°ν™”
- **κ²€μ¦ κ²°κ³Ό ν‘μ‹**: μ‚¬μ©μκ°€ λ°μ΄ν„° ν’μ§μ„ ν™•μΈ κ°€λ¥

### 2. μ½”λ“ ν’μ§ κ°μ„ 
- **μ¤‘λ³µ λ΅μ§ μ κ±°**: λ³΄μ • λ΅μ§ μ •λ¦¬λ΅ μ½”λ“ κ°„κ²°μ„± ν–¥μƒ
- **μ—­ν•  λ…ν™•ν™”**: κ° ν•¨μμ μ—­ν• μ΄ λ…ν™•ν•΄μ§
- **μ—λ¬ μ²λ¦¬ κ°μ„ **: μƒμ„Έν• μ—λ¬ μ •λ³΄λ΅ λ””λ²„κΉ… μ©μ΄

### 3. μ‚¬μ©μ κ²½ν— κ°μ„ 
- **κ²€μ¦ κ²°κ³Ό ν‘μ‹**: λ¦¬ν¬νΈμ—μ„ λ°μ΄ν„° ν’μ§μ„ ν•λμ— ν™•μΈ
- **λ³΄μ • μ΄λ ¥ μ¶”μ **: μλ™ λ³΄μ •λ ν•„λ“ λ©λ΅ ν™•μΈ κ°€λ¥
- **ν¬λ…μ„± ν–¥μƒ**: κ²€μ¦ κ³Όμ •μ΄ λ…ν™•ν•κ² ν‘μ‹λ¨

---

## π” μ£Όμ” λ³€κ²½ νμΌ

1. **api/services/crawler.py**
   - `_extract_with_learning`: Chunk ν™μ© λ΅μ§ μ¶”κ°€

2. **api/services/data_validator.py**
   - `sync_analysis_result_with_crawler_data`: λ‚΄λ¶€μ μΌλ΅ validate_crawler_vs_report νΈμ¶

3. **api/services/report_generator.py**
   - `generate_markdown_report`: validation_result νλΌλ―Έν„° μ¶”κ°€
   - `_generate_report_content`: κ²€μ¦ κ²°κ³Ό μ„Ήμ… μ¶”κ°€

4. **api/main.py**
   - `perform_analysis`: μ¤‘λ³µ νΈμ¶ μ κ±°
   - `download_report`: validation_result μ „λ‹¬
   - μ—λ¬ μ²λ¦¬ κ°μ„  (μƒμ„Έν• μ—λ¬ μ •λ³΄ κΈ°λ΅)

---

## β… κ²€μ¦ λ°©λ²•

### 1. Chunk ν™μ© ν…μ¤νΈ
```python
# μ°μ„  ν¬λ΅¤λ§ ν•„λ“κ°€ μλ” κ²½μ°
# Chunk μ •λ³΄λ¥Ό ν™μ©ν• ν¬λ΅¤λ§μ΄ μν–‰λλ”μ§€ ν™•μΈ
```

### 2. λ³΄μ • λ΅μ§ ν…μ¤νΈ
```python
# validate_crawler_vs_reportλ§ νΈμ¶ν•΄λ„
# μλ™ λ³΄μ •μ΄ μν–‰λλ”μ§€ ν™•μΈ
```

### 3. λ¦¬ν¬νΈ κ²€μ¦ κ²°κ³Ό ν…μ¤νΈ
```python
# λ¦¬ν¬νΈμ— κ²€μ¦ κ²°κ³Ό μ„Ήμ…μ΄ ν‘μ‹λλ”μ§€ ν™•μΈ
# λ³΄μ •λ ν•„λ“, λ¶μΌμΉ ν•­λ©, λ„λ½ ν•­λ©μ΄ ν‘μ‹λλ”μ§€ ν™•μΈ
```

### 4. μ—λ¬ μ²λ¦¬ ν…μ¤νΈ
```python
# ν¬λ΅¤λ§ μ‹¤ν¨ μ‹ μƒμ„Έν• μ—λ¬ μ •λ³΄κ°€ κΈ°λ΅λλ”μ§€ ν™•μΈ
# νμ΄ν”„λΌμΈ λ¨λ‹ν„°λ§μ— λ©”νƒ€λ°μ΄ν„°κ°€ ν¬ν•¨λλ”μ§€ ν™•μΈ
```

---

## π― λ‹¤μ λ‹¨κ³„ κ¶μ¥ μ‚¬ν•­

1. **μ„±λ¥ λ¨λ‹ν„°λ§ λ€μ‹λ³΄λ“**
   - νμ΄ν”„λΌμΈ μ„±κ³µλ¥  μ‹κ°ν™”
   - λ‹¨κ³„λ³„ μ†μ” μ‹κ°„ λ¶„μ„
   - μ—λ¬ νƒ€μ…λ³„ ν†µκ³„

2. **μλ™ μ¬μ‹λ„ λ©”μ»¤λ‹μ¦**
   - μΌμ‹μ  μ¤λ¥μ— λ€ν• μλ™ μ¬μ‹λ„
   - μ¬μ‹λ„ νμ λ° κ°„κ²© μ„¤μ •

3. **μ•λ¦Ό μ‹μ¤ν… κ°•ν™”**
   - κ²€μ¦ μ‹¤ν¨ μ‹ μ•λ¦Ό
   - λ³΄μ •λ ν•„λ“κ°€ λ§μ„ κ²½μ° μ•λ¦Ό

---

## κ²°λ΅ 

λ‹¨κΈ°-μ¤‘κΈ°-μ¥κΈ° λ¨λ“  κ°μ„  μ‚¬ν•­μ΄ μ„±κ³µμ μΌλ΅ μ™„λ£λμ—μµλ‹λ‹¤. λ°μ΄ν„° νμ΄ν”„λΌμΈμ μ •ν™•λ„, μ½”λ“ ν’μ§, μ‚¬μ©μ κ²½ν—μ΄ λ¨λ‘ ν–¥μƒλμ—μΌλ©°, μλ™ν™”λ¥Ό ν†µν•΄ μ •ν™•ν• λ°μ΄ν„°κ°€ λ¶„μ„ λ¦¬ν¬νΈμ— λ°μλλ„λ΅ κ°μ„ λμ—μµλ‹λ‹¤.

**μ£Όμ” μ„±κ³Ό**:
- β… Chunk ν™μ©μΌλ΅ ν¬λ΅¤λ§ μ •ν™•λ„ ν–¥μƒ
- β… λ³΄μ • λ΅μ§ μ •λ¦¬λ΅ μ½”λ“ ν’μ§ κ°μ„ 
- β… κ²€μ¦ κ²°κ³Ό ν‘μ‹λ΅ μ‚¬μ©μ κ²½ν— κ°μ„ 
- β… μ—λ¬ μ²λ¦¬ κ°μ„ μΌλ΅ λ””λ²„κΉ… μ©μ΄μ„± ν–¥μƒ

**μ „μ²΄ ν‰κ°€**: **μ°μ** (95/100)

---

**μ™„λ£ μΌμ‹**: 2024λ…„ (ν„μ¬)
**μ‘μ„±μ**: AI Assistant
